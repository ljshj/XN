package com.bgood.xn.ui.user;import org.json.JSONObject;import android.content.Intent;import android.graphics.Paint;import android.os.Bundle;import android.text.TextUtils;import android.view.View;import android.view.View.OnClickListener;import android.widget.Button;import android.widget.EditText;import android.widget.TextView;import android.widget.Toast;import com.bgood.xn.R;import com.bgood.xn.network.BaseNetWork;import com.bgood.xn.network.HttpRequestInfo;import com.bgood.xn.network.HttpResponseInfo;import com.bgood.xn.network.HttpRquestAsyncTask.TaskListenerWithState;import com.bgood.xn.network.request.UserCenterRequest;import com.bgood.xn.ui.BaseActivity;import com.bgood.xn.utils.MD5;import com.bgood.xn.view.BToast;/** * @todo:登录界面 * @author:hg_liuzl@163.com */public class LoginActivity extends BaseActivity implements OnClickListener,TaskListenerWithState {	private Button m_backBtn;	private EditText m_accountNumberEt;	private EditText m_passwordEt;	private TextView m_forgetPasswordTv;	private Button m_loginBtn;	private Button m_registerBtn;	private View layout;		@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.layout_login_fragment);		initView();	}		private void initView()	{		m_backBtn = (Button) layout.findViewById(R.id.login_btn_back);		m_accountNumberEt = (EditText) layout.findViewById(R.id.login_et_account_number);		m_passwordEt = (EditText) layout.findViewById(R.id.login_et_password);		m_forgetPasswordTv = (TextView) layout.findViewById(R.id.login_tv_forget_password);		m_loginBtn = (Button) layout.findViewById(R.id.login_btn_login);		m_registerBtn = (Button) layout.findViewById(R.id.login_btn_register);		m_forgetPasswordTv.getPaint().setFlags(Paint.UNDERLINE_TEXT_FLAG);// 添加下划线		m_backBtn.setOnClickListener(this);		m_forgetPasswordTv.setOnClickListener(this);		m_loginBtn.setOnClickListener(this);		m_registerBtn.setOnClickListener(this);	}	@Override	public void onClick(View v) {		switch (v.getId())		{		case R.id.login_btn_back:			finish();			break;		case R.id.login_tv_forget_password:// 忘记密码			Intent intent = new Intent(mContext, ForgetPasswordActivity.class);			startActivity(intent);			break;		case R.id.login_btn_login:// 登录			String username = m_accountNumberEt.getText().toString();			String password = m_passwordEt.getText().toString();			if (TextUtils.isEmpty(username))			{				BToast.show(mContext, "请输入用户名");				return;			}else if(TextUtils.isEmpty(password)){				BToast.show(mContext, "请输入密码");				return;			}else{				//注意密码需要用md5进行加密 				UserCenterRequest.getInstance().requestLogin(this, mContext, username, MD5.getMD5(password));			}			break;		// 注册		case R.id.login_btn_register:			Intent intent2 = new Intent(mContext, RegisterActivity.class);			startActivity(intent2);			break;		default:			break;				}	}	@Override	public void onTaskOver(HttpRequestInfo request, HttpResponseInfo info) {		switch (info.getState()) {		case STATE_ERROR_SERVER:			Toast.makeText(mContext, "服务器地址错误", Toast.LENGTH_SHORT).show();			break;		case STATE_NO_NETWORK_CONNECT:			Toast.makeText(mContext, "没有网络，请检查您的网络连接", Toast.LENGTH_SHORT).show();			break;		case STATE_TIME_OUT:			Toast.makeText(mContext, "连接超时", Toast.LENGTH_SHORT).show();			break;		case STATE_UNKNOWN:			Toast.makeText(mContext, "未知错误", Toast.LENGTH_SHORT).show();			break;		case STATE_OK:			BaseNetWork bNetWork = info.getmBaseNetWork();			JSONObject body = bNetWork.getBody();		default:			break;			}	}}