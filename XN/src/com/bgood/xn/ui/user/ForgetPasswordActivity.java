package com.bgood.xn.ui.user;import org.json.JSONArray;import org.json.JSONException;import org.json.JSONObject;import android.content.Intent;import android.os.Bundle;import android.text.TextUtils;import android.view.View;import android.view.View.OnClickListener;import android.view.inputmethod.InputMethodManager;import android.widget.Button;import android.widget.EditText;import android.widget.Toast;import com.bgood.xn.R;import com.bgood.xn.network.BaseNetWork.ReturnCode;import com.bgood.xn.network.BaseNetWork;import com.bgood.xn.network.HttpRequestInfo;import com.bgood.xn.network.HttpResponseInfo;import com.bgood.xn.network.HttpRquestAsyncTask.TaskListenerWithState;import com.bgood.xn.network.request.HomeRequest;import com.bgood.xn.network.request.UserCenterRequest;import com.bgood.xn.system.SystemConfig;import com.bgood.xn.ui.BaseActivity;import com.bgood.xn.utils.LogUtils;import com.bgood.xn.utils.ToolUtils;import com.bgood.xn.view.BToast;import com.iflytek.cloud.InitListener;/** * @todo:忘记密码 * @author:hg_liuzl@163.com */public class ForgetPasswordActivity extends BaseActivity implements OnClickListener,TaskListenerWithState {	 private Button m_backBtn = null;  // 返回按	    private Button m_nextbtn = null;  // 下一步按钮	    private EditText m_phoneEt = null;  // 手机号码	    private String m_phone = null;	    @Override	    protected void onCreate(Bundle savedInstanceState)	    {	        super.onCreate(savedInstanceState);	        setContentView(R.layout.layout_forget_password_phone);	        findView();	    }	    /**	     * 控件初始化方法	     */	    private void findView()	    {	        m_backBtn = (Button) findViewById(R.id.forget_password_phone_btn_back);	        m_nextbtn = (Button) findViewById(R.id.forget_password_phone_btn_next);	        m_phoneEt = (EditText) findViewById(R.id.forget_password_phone_et_phone);  	        m_backBtn.setOnClickListener(this);	        m_nextbtn.setOnClickListener(this);	    }	 	    @Override	    public void onClick(View v)	    {	        switch(v.getId())	        {	            case R.id.forget_password_phone_btn_back:	            {	                finish();	                break;	            }	            case R.id.forget_password_phone_btn_next:	            {	                checkInfo();	                break;	            }	        }	    }	    	    /**	     * 检查用户信息方法	     */	    private void checkInfo()	    {	        // 用户手机号码查询	        String phone = m_phoneEt.getText().toString().trim();	        if (TextUtils.isEmpty(phone))	        {	        		BToast.show(mContext, "用户手机号码不能为空");	            return;	        }else if (!ToolUtils.judgeTelephone(phone))	        {	         	BToast.show(mContext, "请输入正确的手机号码！");	            return;	        }else	        {	        	 // 隐藏软键盘		        ((InputMethodManager) getSystemService(INPUT_METHOD_SERVICE))		        .hideSoftInputFromWindow(ForgetPasswordActivity.this		                        .getCurrentFocus().getWindowToken(),		                        InputMethodManager.HIDE_NOT_ALWAYS);		        UserCenterRequest.getInstance().requestVerifyByForget(this, mContext, phone);	        }	    }		@Override		public void onTaskOver(HttpRequestInfo request, HttpResponseInfo info) {			switch (info.getState()) {			case STATE_ERROR_SERVER:				Toast.makeText(mContext, "服务器地址错误", Toast.LENGTH_SHORT).show();				break;			case STATE_NO_NETWORK_CONNECT:				Toast.makeText(mContext, "没有网络，请检查您的网络连接", Toast.LENGTH_SHORT).show();				break;			case STATE_TIME_OUT:				Toast.makeText(mContext, "连接超时", Toast.LENGTH_SHORT).show();				break;			case STATE_UNKNOWN:				Toast.makeText(mContext, "未知错误", Toast.LENGTH_SHORT).show();				break;			case STATE_OK:				BaseNetWork bNetWork = info.getmBaseNetWork();				JSONObject body = bNetWork.getBody();				String verfy = body.optString("verfy");				Intent intent = new Intent(ForgetPasswordActivity.this, ForgetPasswordCodeActivity.class);				intent.putExtra("verfy", verfy);				intent.putExtra("phone", m_phone);				startActivity(intent);			default:				break;				}					}	    	    }